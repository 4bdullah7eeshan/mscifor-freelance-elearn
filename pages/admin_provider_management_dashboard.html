{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowlegopedia</title>
    <link rel="stylesheet" href="{% static 'css/admin_provider_management.css' %}">
</head>
<body>

<!-- Container that contains "statics boxes" and "Manager Details" STARTS-->   

<h3 id="welcome-back-heading">Welcome Back</h1>   

<!-- Container that contains "statics boxes" STARTS-->               
<div class="earning-enroll-container">
    <!-- Zeeshan: The following could be rendered using loops id we have a common stats data. -->
    <div class="statics-box  total-enroll-count">
        <div class="statics-box-heading">
        <h2>Total enrollment Count</h2>
        <p><span>{{ total_enrollment_count }}</span> users</p></div>
        <img src="../static/admin_img/dashborad_img/total_enroll.png" alt="">
    </div>
    <div class="statics-box total-earning">
        <div class="statics-box-heading">
            <h2>Total Earnings</h2>
            <p><span>₹ {{ total_earnings }}</span>
            </p></div>
            <img src="../static/admin_img/dashborad_img/total_earnings.png" alt="">
        </div>
    <div class="statics-box total-payout">
            <div class="statics-box-heading">
                <h2>Total Payout</h2>
                <p><span>₹ {{ total_payout }}</span></p></div>
                <img src="../static/admin_img/dashborad_img/total_payout.png" alt="">
        </div>
    <div class="statics-box total-net-profit">
                <div class="statics-box-heading">
                    <h2>Total Net Profit</h2>
                    <p><span>₹ {{ total_net_profit }}</span></p></div>
                    <img src="../static/admin_img/dashborad_img/total_payout.png" alt="">
        </div>
    <div class="statics-box this-month-count">
                    <div class="statics-box-heading">
                        <h2>This month count</h2>
                        <p><span>{{ this_month_count }}</span> users
                        </p></div>
                    <img src="../static/admin_img/dashborad_img/this_month_count.png" alt="">
        </div>
    <div class="statics-box this-month-earning">
        <div class="statics-box-heading">
            <h2>This month earnings</h2>
            <p><span>₹ {{ this_month_earning }}</span></p></div>
        <img src="../static/admin_img/dashborad_img/this_month_earnings.png" alt="">
    </div>
    <div class="statics-box this-month-payout">
        <div class="statics-box-heading">
            <h2>This month payout</h2>
            <p><span>₹ {{ this_month_payout }}</span></p></div>
        <img src="../static/admin_img/dashborad_img/this-month-payout.png" alt="">
    </div>
    <div class="statics-box this-month-net-profit">
        <div class="statics-box-heading">
            <h2>This month net profit</h2>
            <p><span>₹ {{ this_month_net_profit }}</span></p></div>
        <img src="../static/admin_img/dashborad_img/total_earnings.png" alt="">
    </div>
</div>
<!-- Container that contains "statics boxes" ENDS--> 

<!-- Container that contains "statics boxes" and "Manager Details" ENDS-->   

<!-- Container that contains "tables" STARTS -->
<div class="tables">
    
        <!-- Container that contains " PAYMENT table" -->
        <div class="each-table-container">
        <h2>PAYMENT</h2>
        <table id="table2">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Invoice No</th>
                    <th>Name</th>
                    <th>Month</th>
                    <th>Course Name</th>
                    <th>No.of enrollments</th>
                    <th>Per share</th>
                    <th>Amount</th>
                    <th>Pay</th>
                </tr>
            </thead>
            <tbody>
                {% for payment in payments %}
                <tr>
                    <td>{{ forloop.counter }}.</td>
                    <td>{{ payment.invoice_no }}</td>
                    <td>{{ payment.name }}</td>
                    <td>{{ payment.month }}</td>
                    <td>{{ payment.course_name }}</td>
                    <td>{{ payment.no_of_enrollments }}</td>
                    <td>{{ payment.per_share }}</td>
                    <td>{{ payment.amount }}</td>
                    <td><p class="green-status">{{ payment.pay_status }}</p></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>

        <!-- Container that contains " COURSE EARNINGS table" -->
        <div class="each-table-container">
            <h2>PROVIDER EARNINGS</h2>
            <table id="table3">
                <thead>
                    <tr>
                        <th>S.no</th>
                        <th>Provider Name</th>
                        <th>No. of course</th>
                        <th>No.of enrollments</th>
                        <th>Total Earnings</th>
                        <th>Total Commision</th>
                        <th>Net Profit</th>
                    </tr>
                </thead>
                <tbody>
                    {% for earning in provider_earnings %}
                    <tr>
                        <td>{{ forloop.counter }}.</td>
                        <td>{{ earning.provider_name }}</td>
                        <td>{{ earning.no_of_courses }}</td>
                        <td>{{ earning.no_of_enrollments }}</td>
                        <td>{{ earning.total_earnings }}</td>
                        <td>{{ earning.total_commission }}</td>
                        <td>{{ earning.net_profit }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Container that contains " COURSE EARNINGS table" -->
        <div class="each-table-container">
            <h2>COURSE EARNINGS</h2>
            <table id="table1">
                <thead>
                    <tr>
                        <th>S.no</th>
                        <th>Provider Name</th>
                        <th>Course name</th>
                        <th>Rating</th>
                        <th>No.of enrollments</th>
                        <th>Earnings</th>
                        <th>Commision</th>
                        <th>Net Profit</th>
                    </tr>
                </thead>
                <tbody>
                    {% for course in course_earnings %}
                    <tr onclick="goToProviderManagement('{{ course.provider_id }}')">
                        <td>{{ forloop.counter }}.</td>
                        <td>{{ course.provider_name }}</td>
                        <td>{{ course.course_name }}</td>
                        <td>{{ course.rating }}</td>
                        <td>{{ course.no_of_enrollments }}</td>
                        <td>{{ course.earnings }}</td>
                        <td>{{ course.commission }}</td>
                        <td>{{ course.net_profit }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
<!-- Container that contains "tables" ENDS -->

<script>
    function goToProviderManagement() {
        window.location.href = "{% url 'admin_provider_management' %}";
    }

</script>
</body>
</html>